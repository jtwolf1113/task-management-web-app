{% extends "base.html" %}{% block title %} {{ board }} {% endblock%}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename = 'boardView.css') }}" />
{% endblock %}

{% block content %}
{% for boardObject in user.boards%}
{% if boardObject.name == board %}
{% set boardname = boardObject.name|string %}
<div class="board-title" id="board-title-div">

<h1 align="center", 
id="board-title", 
class="title"
ondblclick="editTitleDisplay()"
name="board-title">
{{ boardname }}, cats: {{ boardObject.category_num }}
</h1>



<div id="change-name-div" align="center">

<input
name = "board-title"
class="form-control new-board-title"
id="board-title-input"
align="center"
type="text"
value="{{boardObject.name}}"
>

<button 
onclick="updateTitle({{ boardObject.id }})"
class="btn btn-primary"
id="board-title"
>
Save
</button>

<button
onclick="cancelDisplayChange()"
class="btn btn-secondary"
id="board-title"
>
Cancel
</button>
</div>
</div>


<div align="center">
<button 
class="btn btn-primary"
id="create-category-button"
onclick="showCategoryCreation()"
>
Create New Category
</button>

<button 
onclick="deleteBoard({{ boardObject.id }})" 
id="deleteBoard" 
class="btn btn-secondary" 
href="/boards" 
>
Delete Board
</button>
</div>

<div id="create-category-overlay" class="new-category-menu">
    <div align="center" id="new-task-buttons">
        <input 
        type="text"
        placeholder="Enter Title for New Category" 
        class="form-control new-category-menu" 
        id="categoryTitleBox" 
        name="category-title" />

        <button 
        class="new-category-menu btn btn-primary" 
        id="add-category-button" 
        onclick="saveNewCategory({{ boardObject.id }})">
            Save
        </button>
        <button class="new-category-menu btn btn-secondary" id="cancel-add-category-button" onclick="cancelNewCategoryDisplay()">
            Cancel
        </button>
    </div>
</div>





<div 
class="board_content"
id="envelop_content" >

{% for cat in boardObject.categories %}

<div class="category_container" name="{{ cat.name }}">
    <h3 class="category_name">{{ cat.name }}</h3>
    <ul class="task_list">
    {% for task in cat.tasks%}
    {% if task.completed == False %}
    <li class="task-item-incompleted">
        <a class="edit_task_link" href="/boards/{{boardObject.name}}/{{task.name}}">
            <span class="incompleted-task-text">{{task.name}}</span>
        </a>
    </li>
    {% endif %}
    {% endfor %}

    {% for task in cat.tasks%}
    {% if task.completed == True %}
    <li class="task-item-completed">
        <a class="edit_task_link" href="/boards/{{boardObject.name}}/{{task.name}}">
            <span class="completed-task-text">{{task.name}}</span>
        </a>
    </li>
    {% endif %}
    {% endfor %}
    </ul>
    
    <button 
    class="btn btn-primary"
    id="createTask"
    onclick="showTaskCreation()"
    >
    Create New Task
    </button>

    <div id="create-task-overlay" class="new-task-menu">
        <div align="center" id="new-task-buttons">
            
            <input 
            type="text"
            placeholder="Name" 
            class="form-control new-task-menu" 
            id="taskTitleBox" 
            name="task-title" />
            <input 
            type="text"
            placeholder="Description" 
            class="form-control new-task-menu" 
            id="taskDescriptionBox" 
            name="task-description" />
            
            <input
            type="datetime-local"
            class="form-control new-task-menu"
            id="taskDueDateBox"
            name="due-date"
            />
    
            <button class="new-task-menu btn btn-primary" id="add-task-button" onclick="saveNewTask({{ boardObject.id }}, {{ cat.id }})">
                Save
            </button>
            <button class="new-task-menu btn btn-secondary" id="cancel-add-task-button" onclick="cancelNewTaskDisplay()">
                Cancel
            </button>
        </div>
    </div><!-- End create-task container -->
</div><!-- End category container -->
    
{% endfor %}

</div> <!-- End board content-->




{% endif %}

{% endfor %}

{% endblock %}